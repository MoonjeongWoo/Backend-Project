<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://code.jquery.com/jquery-3.6.1.js"
      integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
      crossorigin="anonymous"
    ></script>
    <title>Document</title>
    <!-- jquery -->
    <script
      src="https://code.jquery.com/jquery-3.6.1.min.js"
      integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
      crossorigin="anonymous"
    ></script>
    <!-- axios -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.27.2/axios.min.js"
      integrity="sha512-odNmoc1XJy5x1TMVMdC7EMs3IVdItLPlCeL5vSUPN2llYKMJ2eByTTAIiiuqLg+GdNr9hF6z81p27DArRFKT7A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>

  <body>
    <%#-include("navbar.ejs")%>
    <form id="form-register" action="/user/saveIntroudce" method="post">
      <label>stack</label>
      <% var stackList=["JAVA", "Javascript" , "Python" , "R" , "C" , "C++" ,
      "C#", "PHP" , "Cobol" , "HTML" , "Linux" , "Kotlin" , "Dart" , "Go" ];%>
      <select name="stack" id="stack">
        <% for ( var i=0; i < stackList.length; i++ ) { %>
        <option value="<%= stackList[i] %>"><%= stackList[i] %></option>
        <% }%></select
      ><br />
      <div class="selected_list"></div>
      <br />
      <label>career</label>
      <input
        type="range"
        name="career"
        min="0"
        ,
        max="20"
        id="range"
        value="1"
      /><br />
      <label>port folio</label>
      <input type="text" name="link" value="" id="link" /><br />
      <label etc>짧은 자기소개</label>
      <input type="text" name="etc" value="" id="etc" /><br />
      <button type="button" id="submit" onclick="aaa()">제출</button>
    </form>
    <script>
      //stack 선택
      $("#stack").change(function () {
        let selected_stack = $("#stack option:selected").text();
        $("selected_list").appendTo(`<p>${selected_stack}</p>`);
        sendData("stack_lists", selected_stack);
      });
      //career value 값
      var ranges = document.getElementById("range");
      ranges.onchange = function () {
        sendElement("career", ranges.value);
      };
      //axios로 보내기
      function sendData(element, data) {
        axios({
          url: "",
          method: "post",
          data: {
            elements: element,
            datas: data,
          },
        }).then((response) => {
          res.send(response.data);
        });
      }

      function aaa() {
        var choose = $("#stack").val();
        var career = $("#link").val();
        var etc = $("#etc").val();
        var range = $("#range").val();

        // data = {
        //   stack: choose,
        //   link: career,
        //   etc: etc,
        //   range: range,
        // };
        data = {
          stack: "react",
          career: "39393939",
          portfolio: "gogo.com",
          etc: "hihihihi",
        };
        console.log(data);
        axios({
          url: "/user/saveIntroudce",
          method: "post",
          data: data,
        }).then((response) => {
          console.log(response.data);
        });
      }
    </script>
  </body>
</html>
